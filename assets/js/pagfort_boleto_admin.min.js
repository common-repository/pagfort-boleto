jQuery(document).ready(function(e){const n="#woocommerce_"+data_enqueue.prefix_id;function t(){e("#wpbody").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})}e(`${n}_btn_test_connection`).click(function(){a("",data_enqueue.await_notice);var t={action:"pagfort_post_test_connection",security:data_enqueue.pagfort_nonce};function o(e){e?a("notice-success",data_enqueue.success_notice):a("notice-error",data_enqueue.error_notice)}function a(t,o){e(e(`${n}_connection_message`)).html(`<div class="notice ${t} is-dismissible"><p>${o}</p></div>`)}e.ajax({type:"POST",url:data_enqueue.url,data:t,success:function(e){o(e)},error:function(e){o(!1)}})}),e("button.save_order").on("click",function(n){var o=e("#post").serializeArray().reduce(function(e,n){return e[n.name]=n.value,e},{});if(data_enqueue.prefix_id==o._payment_method){t(),n.preventDefault();var a={post:o,action:"pagfort_post_order_validate",security:data_enqueue.pagfort_nonce};e.ajax({url:data_enqueue.url,data:a,type:"POST",success:function(n){!function(n){if(n.valid)e("form#post").submit();else{var t="";n.msg.map(function(e){t+=e+"\n"}),alert(t)}}(n)},error:function(e){console.log("ERROR"),console.log(e)},complete:function(){e("#wpbody").unblock()}})}}),e("select#_payment_method").on("change",function(){var n=e(this);if("pagfort_boleto"===n.val()){t();var o={action:"pagfort_post_add_discount",security:data_enqueue.pagfort_nonce};return e.post(data_enqueue.url,o,function(t){e("#wpbody").unblock();var o=jQuery.parseJSON(t);o&&n.prev().append("<span id='span_discount'><strong> "+o+"% de desconto</strong></span>")}),!1}e("span#span_discount").remove()}),e("#_billing_persontype").on("change",function(){var n=e(this).val();"0"!==n&&("1"===n?e("#_billing_cpf").mask("000.000.000-00"):e("#_billing_cnpj").mask("00.000.000/0000-00"))}),e("a#update_order_pagfort").on("click",function(){var n=e(this).attr("status"),t=e(this).attr("value");window.confirm(data_enqueue.confirm+n+"?")&&(jQuery("#order_status").val(t).change(),e("form#post").submit())})});